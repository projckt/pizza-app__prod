import{r as t,d as s,h as e,H as i}from"./p-76bbd7fc.js";import"./p-efed8a23.js";import{V as n}from"./p-627d7603.js";import{j as a}from"./p-e10b421b.js";const o=a.object({email:a.string().email({tlds:{allow:!1}}).min(5).max(128).lowercase().trim().required(),password:a.string().min(8).max(1024).required()});let l=class{constructor(e){t(this,e),this.event_RouteTo=s(this,"event_RouteTo",7),this.success_Auth=s(this,"success_Auth",7),this.email="",this.password="",this.isActive_Login_Button=!1}handle_LinkClick(t){"signup"===t.detail.action?this.event_RouteTo.emit({type:"push",route:"/signup",data:{}}):"forgotPassword"===t.detail.action&&this.event_RouteTo.emit({type:"push",route:"/forgot-password",data:{}})}handle_TextInput(t){"email"===t.detail.name?this.email=t.detail.value:"password"===t.detail.name&&(this.password=t.detail.value)}handle_ButtonClick(t){"submit_LoginInputs"===t.detail.action&&this.handle_Submit_LoginInputs()}async handle_Submit_LoginInputs(){let t=(s=this.password,{email:this.email.trim().toLowerCase(),password:s.trim()});var s;let{isValid_LoginInputs:e,message_Validate_LoginInputs:i}=(t=>{let{error:s}=o.validate(t);return s?{isValid_LoginInputs:!1,message_Validate_LoginInputs:s.details[0].message}:{isValid_LoginInputs:!0,message_Validate_LoginInputs:""}})(t);if(!e)return alert(i);this.isActive_Login_Button=!0;let{isSuccess_LoginInputs_Submission:a,message_LoginInputs_Submission:l,payload_LoginInputs_Submission:r}=await(async t=>{let s,e=!1,i=`${n.api.url}/${n.api.endpoint.login}`,a={method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)};return await fetch(i,a).then((t=>t.json())).then((t=>{s=t,e=s.success})).catch((t=>{console.log(t)})),e?{isSuccess_LoginInputs_Submission:!0,message_LoginInputs_Submission:s.message,payload_LoginInputs_Submission:s}:{isSuccess_LoginInputs_Submission:!1,message_LoginInputs_Submission:s.message,payload_LoginInputs_Submission:{}}})(t);return this.isActive_Login_Button=!1,a?r.success?void this.success_Auth.emit({payload:r.payload}):alert(r.message):alert(l)}render(){return e(i,null,e("c-card",null,e("e-text",{variant:"display"},"Login"),e("e-text",null,"Not registered?"," ",e("e-link",{action:"signup",event:!0},"Sign up")),e("l-spacer",{value:2}),e("e-input",{type:"email",name:"email",placeholder:"Email"}),e("br",null),e("l-spacer",{value:1}),e("e-input",{type:"password",name:"password",placeholder:"Password"}),e("br",null),e("l-spacer",{value:1}),e("l-row",{justifyContent:"space-between"},e("e-text",{variant:"footnote"},e("e-link",{action:"forgotPassword",event:!0},"Forgot Password")),e("e-button",{action:"submit_LoginInputs",active:this.isActive_Login_Button},"Login")),e("l-spacer",{value:2}),e("l-seperator",null),e("l-spacer",{value:.5}),e("e-text",{variant:"footnote"},"By logging in, you accept our ",e("br",null),e("e-link",{href:"https://aitihyatheheritage.in/terms-of-service.html",target:"_blank"},"terms")," ","&"," ",e("e-link",{href:"https://aitihyatheheritage.in/cancellation-refund-policy.html",target:"_blank"},"privacy policy"))," "))}};l.style=":host{display:block;width:25%;margin:0 auto;padding-top:6em}";export{l as v_login}