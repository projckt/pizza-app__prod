import{r as t,d as s,h as e,H as i}from"./p-76bbd7fc.js";import"./p-efed8a23.js";import{V as a}from"./p-627d7603.js";import{j as n}from"./p-e10b421b.js";const u=n.object({name_First:n.string().required(),name_Last:n.string().required(),email:n.string().email({tlds:{allow:!1}}).min(5).max(128).lowercase().trim().required(),password:n.string().min(8).max(1024).required()});let l=class{constructor(e){t(this,e),this.event_RouteTo=s(this,"event_RouteTo",7),this.success_Auth=s(this,"success_Auth",7),this.name_First="",this.name_Last="",this.email="",this.password="",this.isActive_Signup_Button=!1}handle_LinkClick(t){"login"===t.detail.action?this.event_RouteTo.emit({type:"push",route:"/login",data:{}}):"forgotPassword"===t.detail.action&&this.event_RouteTo.emit({type:"push",route:"/forgot-password",data:{}})}handle_TextInput(t){"name_First"===t.detail.name?this.name_First=t.detail.value:"name_Last"===t.detail.name?this.name_Last=t.detail.value:"email"===t.detail.name?this.email=t.detail.value:"password"===t.detail.name&&(this.password=t.detail.value)}handle_ButtonClick(t){"submit_SignupInputs"===t.detail.action&&this.handle_Submit_SignupInputs()}async handle_Submit_SignupInputs(){let t=(s=this.name_Last,e=this.email,i=this.password,{name_First:this.name_First.trim(),name_Last:s.trim(),email:e.trim().toLowerCase(),password:i.trim()});var s,e,i;let{isValid_SignupInputs:n,message_Validation_SignupInputs:l}=(t=>{let{error:s}=u.validate(t);return s?{isValid_SignupInputs:!1,message_Validation_SignupInputs:s.details[0].message}:{isValid_SignupInputs:!0,message_Validation_SignupInputs:""}})(t);if(!n)return alert(l);this.isActive_Signup_Button=!0;let{isSuccess_SignupInputs_Submission:p,message_SignupInputs_Submission:o,payload_SignupInputs_Submission:r}=await(async t=>{let s,e=!1,i=`${a.api.url}/${a.api.endpoint.signup}`,n={method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)};return await fetch(i,n).then((t=>t.json())).then((t=>{s=t,e=s.success})).catch((t=>{console.log(t)})),e?{isSuccess_SignupInputs_Submission:!0,message_SignupInputs_Submission:"Signup successful",payload_SignupInputs_Submission:s}:{isSuccess_SignupInputs_Submission:!1,message_SignupInputs_Submission:"Signup failed",payload_SignupInputs_Submission:{}}})(t);return this.isActive_Signup_Button=!1,p?r.success?void this.success_Auth.emit({payload:r.payload}):alert(r.message):alert(o)}render(){return e(i,null,e("c-card",null,e("e-text",{variant:"display"},"Sign up"),e("e-text",null,"Have an account?"," ",e("e-link",{action:"login",event:!0},"Login")),e("l-spacer",{value:2}),e("e-input",{type:"text",name:"name_First",placeholder:"First name"}),e("br",null),e("l-spacer",{value:1}),e("e-input",{type:"text",name:"name_Last",placeholder:"Last name"}),e("br",null),e("l-spacer",{value:1}),e("e-input",{type:"email",name:"email",placeholder:"Email"}),e("br",null),e("l-spacer",{value:1}),e("e-input",{type:"password",name:"password",placeholder:"Password (Min. 8 letters)"}),e("l-spacer",{value:1}),e("l-row",{justifyContent:"space-between"},e("e-text",{variant:"footnote"},e("e-link",{action:"forgotPassword",event:!0},"Forgot Password")),e("e-button",{action:"submit_SignupInputs",active:this.isActive_Signup_Button},"Sign up")),e("l-spacer",{value:2}),e("l-seperator",null),e("l-spacer",{value:.5}),e("e-text",{variant:"footnote"},"By signing up, you accept our",e("br",null),e("e-link",{href:"https://aitihyatheheritage.in/terms-of-service.html",target:"_blank"},"terms")," ","&"," ",e("e-link",{href:"https://aitihyatheheritage.in/cancellation-refund-policy.html",target:"_blank"},"privacy policy"))," "))}};l.style=":host{display:block;width:25%;margin:0 auto;padding-top:6em}";export{l as v_signup}